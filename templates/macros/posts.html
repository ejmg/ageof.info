{% macro meta(page, config, author) %}
<div class="post-meta">
    <span class="post-date">
        {{ page.date | date(format="%Y.%m.%d") }}
    </span>
    {%- if author -%}
        <span class="post-author">
            {{ utils::pdate(page=page, config=config)}}
        </span>
    {%- endif -%}
    {# TODO: these bools should be set in config instead of hardcoded here #}
    {{  posts::taxonomies(taxonomy=page.taxonomies,
        disp_cat=true,
        disp_tag=true) }}
</div>
{% endmacro meta %}

{% macro taxonomies(taxonomy, disp_cat, disp_tag) %}

    {% if disp_cat and disp_tag -%}
        {% if taxonomy.categories -%}
            :: {
            {%- for cat in taxonomy.categories -%}
                {%- if loop.last -%}
                    <a href="{{ get_taxonomy_url(kind="categories", name=cat ) }}">{{ cat }}</a>
                {%- else -%}
                    <a href="{{ get_taxonomy_url(kind="categories", name=cat ) }}">{{ cat }}</a>,
                    {# end of if-check for whether last item or not #}
                {%- endif -%}
            {%- endfor -%}} {# <--- NOTE: OPEN CURLY BRACE #}
            {# end if-check for categories #}
        {%- endif -%}
        
        {% if taxonomy.tags -%}
            ::
            {% for tag in taxonomy.tags -%}
                #<a href="{{get_taxonomy_url(kind="tags", name=tag )}}">{{ tag }}</a>
                {# end of tags for-loop #}
            {% endfor -%}
            {# end if-check for tags #}
        {% endif -%}
    {% elif disp_cat -%}
        {% if taxonomy.categories-%}
            ::
            {{ "{" }}
            {% for cat in taxonomy.categories -%}
                {%- if loop.last -%}
                    <a href="{{ get_taxonomy_url(kind="categories", name=cat ) }}">{{ cat }}</a>
                {%- else -%}
                    <a href="{{ get_taxonomy_url(kind="categories", name=cat ) }}">{{ cat }},&nbsp;</a>
                    {# end of if-check for whether last item or not #}
                {%- endif -%}                    
                {# end of cats for-loop #}
            {% endfor -%}
            {{ "}" }}
            {# end if-check for categories #}
        {% endif -%}
    {% elif disp_tag -%}
        {% if taxonomy.tags -%}
            ::
            {% for tag in taxonomy.tags -%}
                #<a href="{{get_taxonomy_url(kind="tags", name=tag )}}">{{ tag }}</a>
                    {# end of tags for-loop #}
                {% endfor -%}
            {# end if-check for tags #}
            {% endif -%}
            {# end if-check for BOTH disp bools #}
    {% endif -%}
{% endmacro taxonomies %}

{% macro tags(tags) %}
    {# TODO #}
{% endmacro tags %}
